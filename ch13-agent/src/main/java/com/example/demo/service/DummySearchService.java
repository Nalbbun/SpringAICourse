package com.example.demo.service;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Random;

import org.springframework.stereotype.Service;

import lombok.extern.slf4j.Slf4j;

// 더미 검색 서비스
@Service
@Slf4j
public class DummySearchService implements InternetSearchService {
  
  private final Random random = new Random();

  /**
   * 더미 검색 수행
   * 
   * @param query 검색 쿼리
   * @return 포맷팅된 검색 결과 문자열 (랜덤 10개)
   */
  @Override
  public String search(String query) {
    // 관광지 관련 검색 (더 많은 키워드 추가)
    if (query.contains("관광") || query.contains("명소") || query.contains("가볼만한") ||
        query.contains("여행지") || query.contains("입장료") || query.contains("관광지") ||
        query.contains("여행") || query.contains("추천")) {
      return getAttractionResults(query);
    }
    // 맛집 관련 검색 (더 많은 키워드 추가)
    else if (query.contains("맛집") || query.contains("음식") || query.contains("레스토랑") ||
             query.contains("식당") || query.contains("먹을") || query.contains("식사") ||
             query.contains("요리")) {
      return getRestaurantResults(query);
    }
    // 숙소 관련 검색
    else if (query.contains("숙소") || query.contains("호텔") || query.contains("펜션") ||
             query.contains("리조트") || query.contains("게스트하우스")) {
      return getAccommodationResults(query);
    }
    // 지원하지 않는 검색 유형
    else {
      return "[안내] 관광지, 맛집, 숙소 관련 검색만 지원합니다.";
    }
  }
  
  /**
   * 웹 페이지 내용 더미 데이터 반환
   * 
   * @param url 웹 페이지 URL (실제로는 사용하지 않음)
   * @return 페이지 본문 텍스트
   */
  @Override
  public String fetch(String url) {
    
    // URL에 따라 다른 내용 반환
    if (url.contains("attraction") || url.contains("명소")) {
      return "이 관광지는 매우 유명한 명소입니다. 입장료는 성인 기준 10,000원이며, 운영 시간은 오전 9시부터 오후 6시까지입니다. "
          + "주차장이 완비되어 있으며, 대중교통으로도 접근이 용이합니다. 주변에 다양한 식당과 카페가 있어 편리합니다.";
    } else if (url.contains("restaurant") || url.contains("맛집")) {
      return "이 식당은 현지 특색 요리로 유명합니다. 대표 메뉴는 1인 기준 15,000원이며, "
          + "영업 시간은 오전 11시부터 오후 9시까지입니다. 주차 가능하며, 예약을 권장합니다.";
    } else if (url.contains("hotel") || url.contains("숙소")) {
      return "이 숙소는 깨끗하고 편안한 시설을 자랑합니다. 1박 요금은 80,000원부터 시작하며, "
          + "무료 Wi-Fi와 조식이 포함되어 있습니다. 체크인은 오후 3시, 체크아웃은 오전 11시입니다.";
    }
    
    return "페이지 내용을 가져왔습니다. 상세한 정보가 포함되어 있습니다.";
  }

  // 관광지 검색 결과
  private String getAttractionResults(String query) {
    String destination = extractDestination(query);
    
    // 지역별 관광지 데이터
    List<String> allAttractions = new ArrayList<>();
    
    if (destination.contains("제주")) {
      allAttractions.addAll(List.of(
          "[1] 성산일출봉\n제주특별자치도 서귀포시 성산읍 일출로 284-12\n유네스코 세계자연유산으로 지정된 화산 분화구입니다. 일출 명소로 유명하며 정상까지 약 30분 소요됩니다. 입장료: 5,000원",
          "[2] 한라산 국립공원\n제주특별자치도 제주시 1100로 2070-61\n제주도의 상징인 한라산을 품은 국립공원입니다. 다양한 등산 코스와 아름다운 자연경관을 자랑합니다. 입장료: 무료",
          "[3] 만장굴\n제주특별자치도 제주시 구좌읍 만장굴길 182\n세계적으로 희귀한 용암동굴로 천연기념물 제98호입니다. 총 길이 13.4km 중 1km 구간이 개방되어 있습니다. 입장료: 4,000원",
          "[4] 섭지코지\n제주특별자치도 서귀포시 성산읍 섭지코지로 107\n푸른 바다와 기암절벽이 어우러진 절경 포인트입니다. 드라마 촬영지로도 유명하며 산책하기 좋습니다. 입장료: 무료",
          "[5] 천지연폭포\n제주특별자치도 서귀포시 천지동 667-7\n높이 22m의 웅장한 폭포로 밤에는 조명이 켜져 환상적입니다. 천연기념물 제27호로 지정된 담팔수 자생지도 있습니다. 입장료: 2,500원",
          "[6] 주상절리대\n제주특별자치도 서귀포시 이어도로 36-30\n화산 폭발로 형성된 기둥 모양의 절리가 장관을 이룹니다. 파도가 치는 모습과 함께 보면 더욱 멋집니다. 입장료: 2,000원",
          "[7] 우도\n제주특별자치도 제주시 우도면\n제주 동쪽 끝에 위치한 작은 섬으로 에메랄드빛 바다가 아름답습니다. 자전거나 전동차로 둘러보기 좋습니다. 입장료: 무료(여객선 왕복 8,500원)",
          "[8] 제주민속촌\n제주특별자치도 서귀포시 표선면 민속해안로 631-34\n제주도의 전통 생활상을 재현한 민속박물관입니다. 100여 채의 전통 가옥과 다양한 민속 자료를 볼 수 있습니다. 입장료: 15,000원",
          "[9] 협재해수욕장\n제주특별자치도 제주시 한림읍 협재리\n에메랄드빛 바다와 백사장이 아름다운 해수욕장입니다. 비양도가 보이고 물놀이와 산책을 동시에 즐길 수 있습니다. 입장료: 무료",
          "[10] 테디베어뮤지엄\n제주특별자치도 서귀포시 중문관광로 110번길 31\n다양한 테마의 테디베어를 전시한 박물관입니다. 아이들과 함께 방문하기 좋으며 포토존이 많습니다. 입장료: 11,000원",
          "[11] 오설록 티뮤지엄\n제주특별자치도 서귀포시 안덕면 신화역사로 15\n제주 녹차의 역사와 문화를 체험할 수 있는 복합문화공간입니다. 넓은 녹차밭과 카페가 함께 있습니다. 입장료: 무료",
          "[12] 용두암\n제주특별자치도 제주시 용두암길 15\n용의 머리를 닮은 기암괴석으로 제주시 대표 관광지입니다. 일몰 시간에 방문하면 특히 아름답습니다. 입장료: 무료",
          "[13] 정방폭포\n제주특별자치도 서귀포시 칠십리로214번길 37\n아시아에서 유일하게 바다로 떨어지는 해안폭포입니다. 높이 23m에서 떨어지는 물줄기가 시원합니다. 입장료: 2,000원",
          "[14] 산굼부리\n제주특별자치도 제주시 조천읍 비자림로 768\n분화구가 함몰되어 형성된 거대한 화산체로 천연기념물입니다. 둘레를 따라 걸으며 독특한 경관을 감상할 수 있습니다. 입장료: 6,000원",
          "[15] 비자림\n제주특별자치도 제주시 구좌읍 비자림로 55\n500~800년생 비자나무 2,800여 그루가 밀집한 숲입니다. 산림욕과 힐링하기 좋은 곳입니다. 입장료: 3,000원",
          "[16] 카멜리아힐\n제주특별자치도 서귀포시 안덕면 병악로 166\n동백꽃을 비롯한 다양한 식물이 있는 수목원입니다. 사계절 아름다운 정원과 산책로가 있습니다. 입장료: 8,000원",
          "[17] 제주 절부암\n제주특별자치도 제주시 조천읍 신북로 503\n바다 위에 우뚝 솟은 거대한 바위로 전설이 깃든 곳입니다. 해안 드라이브 코스에서 들르기 좋습니다. 입장료: 무료",
          "[18] 월정리해변\n제주특별자치도 제주시 구좌읍 월정리\n에메랄드빛 바다와 하얀 백사장이 아름다운 해변입니다. 주변에 카페와 레스토랑이 많아 여유롭게 즐길 수 있습니다. 입장료: 무료",
          "[19] 제주 아쿠아플라넷\n제주특별자치도 서귀포시 성산읍 섭지코지로 95\n국내 최대 규모의 수족관으로 다양한 해양생물을 볼 수 있습니다. 메인 수조와 돌고래 공연이 인기입니다. 입장료: 38,000원",
          "[20] 서귀포 매일올레시장\n제주특별자치도 서귀포시 중앙로62번길 18\n제주 전통 시장으로 신선한 해산물과 과일을 저렴하게 구매할 수 있습니다. 먹거리 골목도 풍성합니다. 입장료: 무료",
          "[21] 추자도\n제주특별자치도 제주시 추자면\n제주와 목포 사이에 위치한 작은 섬으로 에메랄드빛 바다가 환상적입니다. 낚시와 해양레저를 즐길 수 있습니다. 입장료: 무료(여객선 별도)",
          "[22] 제주 돌문화공원\n제주특별자치도 제주시 조천읍 남조로 2023\n제주의 돌문화를 체험할 수 있는 생태공원입니다. 다양한 돌 조형물과 자연경관이 조화를 이룹니다. 입장료: 5,000원",
          "[23] 함덕해수욕장\n제주특별자치도 제주시 조천읍 조함해안로 525\n제주 북부의 대표 해수욕장으로 얕고 잔잔한 바다가 가족 단위 여행객에게 인기입니다. 입장료: 무료",
          "[24] 제주 신화월드\n제주특별자치도 서귀포시 안덕면 신화역사로 304번길 38\n복합 테마파크로 놀이기구, 워터파크, 동물원 등을 즐길 수 있습니다. 가족 여행에 추천합니다. 입장료: 50,000원",
          "[25] 사려니숲길\n제주특별자치도 제주시 조천읍 교래리 산137-1\n제주에서 가장 아름다운 숲길로 유명합니다. 15km의 평탄한 길을 따라 삼나무 숲 사이를 걸을 수 있습니다. 입장료: 무료",
          "[26] 제주 유리의성\n제주특별자치도 제주시 한경면 녹차분재로 462\n유리 조형물과 미디어아트가 결합된 테마파크입니다. 밤에는 조명으로 환상적인 분위기를 연출합니다. 입장료: 9,000원",
          "[27] 성읍민속마을\n제주특별자치도 서귀포시 표선면 성읍정의현로 19\n제주의 전통 초가집이 보존된 민속마을입니다. 돌담과 초가지붕이 어우러진 풍경이 아름답습니다. 입장료: 무료",
          "[28] 제주 조랑말체험공원\n제주특별자치도 제주시 한경면 녹차분재로 489\n제주 전통 조랑말을 직접 타보고 교감할 수 있는 체험공원입니다. 어린이들에게 인기가 많습니다. 입장료: 15,000원",
          "[29] 비양도\n제주특별자치도 제주시 한림읍 협재리\n협재해수욕장 앞바다에 떠 있는 작은 섬입니다. 산책로를 따라 섬을 한 바퀴 도는 데 1시간 정도 소요됩니다. 입장료: 무료(배편 별도)",
          "[30] 제주 항몽유적지\n제주특별자치도 제주시 애월읍 항몽로 50\n고려시대 몽골에 항거했던 삼별초의 유적지입니다. 역사적 의미가 깊은 장소로 교육적 가치가 있습니다. 입장료: 무료"
      ));
    } else {
      allAttractions.addAll(List.of(
          "[안내] 현재 더미 데이터는 제주도만 지원합니다.\n제주도 여행 계획을 요청해주세요."
      ));
    }
    
    return formatResults(query, allAttractions);
  }

  // 맛집 검색 결과
  private String getRestaurantResults(String query) {
    String destination = extractDestination(query);
    
    // 지역별 맛집 데이터
    List<String> allRestaurants = new ArrayList<>();
    
    if (destination.contains("제주")) {
      allRestaurants.addAll(List.of(
          "[1] 올레국수\n제주특별자치도 제주시 귀아랑길 24\n50년 전통의 제주 향토 국수 맛집입니다. 고기국수와 멸치국수가 유명합니다. 1인 평균 가격: 8,000원",
          "[2] 돈사돈\n제주특별자치도 제주시 노형로 256\n제주 흑돼지 전문점으로 두툼한 고기와 숯불 향이 일품입니다. 1인 평균 가격: 20,000원",
          "[3] 삼대국수\n제주특별자치도 서귀포시 중앙로58번길 18\n고기국수로 유명한 현지인 맛집입니다. 푸짐한 양과 깊은 육수 맛이 특징입니다. 1인 평균 가격: 9,000원",
          "[4] 우진해장국\n제주특별자치도 제주시 중앙로14길 22\n속을 풀어주는 따뜻한 해장국 전문점입니다. 24시간 영업으로 언제나 방문 가능합니다. 1인 평균 가격: 10,000원",
          "[5] 제주마을\n제주특별자치도 서귀포시 중문관광로 50\n제주 향토 음식을 한상에 차려주는 정갈한 한식당입니다. 1인 평균 가격: 15,000원",
          "[6] 해녀의집\n제주특별자치도 서귀포시 성산읍 고성리\n싱싱한 해산물과 성게국이 일품인 해녀 직영 식당입니다. 1인 평균 가격: 18,000원",
          "[7] 자매국수\n제주특별자치도 제주시 일주동로 319\n야들야들한 돔베고기와 국수가 맛있는 집입니다. 1인 평균 가격: 9,000원",
          "[8] 월정리카페거리 브런치\n제주특별자치도 제주시 구좌읍 월정3길\n에메랄드빛 바다를 보며 즐기는 브런치 카페입니다. 1인 평균 가격: 16,000원",
          "[9] 은희네해장국\n제주특별자치도 제주시 서사로 14\n묵은지와 돼지고기가 들어간 걸쭉한 해장국이 일품입니다. 1인 평균 가격: 11,000원",
          "[10] 꽃보다횟집\n제주특별자치도 제주시 애월읍 애월해안로 454\n바다를 보며 먹는 신선한 회 전문점입니다. 1인 평균 가격: 30,000원",
          "[11] 진미식당\n제주특별자치도 서귀포시 태평로 273\n고등어구이와 갈치조림이 맛있는 가정식 백반집입니다. 1인 평균 가격: 12,000원",
          "[12] 춘자네\n제주특별자치도 제주시 한림읍 한림로 542\n제주 토속 음식과 해물찜을 전문으로 하는 맛집입니다. 1인 평균 가격: 25,000원",
          "[13] 애월해녀밥상\n제주특별자치도 제주시 애월읍 하귀1길 14\n해녀가 직접 잡은 해산물로 만든 해물뚝배기가 유명합니다. 1인 평균 가격: 13,000원",
          "[14] 남문식당\n제주특별자치도 서귀포시 남문로 46\n갈치조림과 고등어조림으로 유명한 오래된 식당입니다. 1인 평균 가격: 14,000원",
          "[15] 제주흑돼지명가\n제주특별자치도 제주시 연삼로 258\n구이와 보쌈으로 제주 흑돼지를 즐길 수 있습니다. 1인 평균 가격: 22,000원",
          "[16] 오렌지몽땅\n제주특별자치도 서귀포시 성산읍 일출로 286-17\n성산일출봉 근처 신선한 해물라면과 감귤주스가 인기입니다. 1인 평균 가격: 10,000원",
          "[17] 명진전복\n제주특별자치도 제주시 조천읍 신북로 532\n전복죽과 전복돌솥밥이 맛있는 전문점입니다. 1인 평균 가격: 17,000원",
          "[18] 천지연식당\n제주특별자치도 서귀포시 천지동\n옥돔구이와 은갈치조림으로 유명한 현지 맛집입니다. 1인 평균 가격: 18,000원",
          "[19] 제주전통떡카페\n제주특별자치도 제주시 한경면 일주서로 2454\n전통 제주 떡과 오메기떡을 맛볼 수 있는 카페입니다. 1인 평균 가격: 8,000원",
          "[20] 해물뚝배기\n제주특별자치도 제주시 한림읍 귀덕로 11\n싱싱한 해물이 가득 든 뚝배기가 시원한 맛집입니다. 1인 평균 가격: 15,000원",
          "[21] 고집돌우럭\n제주특별자치도 서귀포시 안덕면 화순중앙로 54\n싱싱한 우럭과 물회가 맛있는 해산물 전문점입니다. 1인 평균 가격: 20,000원",
          "[22] 제주식당\n제주특별자치도 제주시 애월읍 평화로 2080\n제주 전통 음식을 한상 차림으로 제공하는 식당입니다. 1인 평균 가격: 16,000원",
          "[23] 갈치구이전문점\n제주특별자치도 서귀포시 표선면 번영로 2764\n고소한 갈치구이와 갈치국이 유명합니다. 1인 평균 가격: 19,000원",
          "[24] 한림횟집\n제주특별자치도 제주시 한림읍 한림해안로 69\n신선한 활어회와 해물탕을 즐길 수 있습니다. 1인 평균 가격: 28,000원",
          "[25] 오설록카페\n제주특별자치도 서귀포시 안덕면 신화역사로 15\n제주 녹차로 만든 디저트와 음료를 즐기는 카페입니다. 1인 평균 가격: 12,000원",
          "[26] 제주흑돼지야\n제주특별자치도 제주시 노형로 189\n두툼한 흑돼지 목살구이가 맛있는 고깃집입니다. 1인 평균 가격: 23,000원",
          "[27] 성산포왕돈까스\n제주특별자치도 서귀포시 성산읍 일출로 227\n두툼하고 바삭한 수제 돈까스 전문점입니다. 1인 평균 가격: 11,000원",
          "[28] 제주맘손칼국수\n제주특별자치도 제주시 구좌읍 해맞이해안로 1320\n손으로 뽑은 칼국수와 수제비가 맛있는 집입니다. 1인 평균 가격: 9,000원",
          "[29] 서귀포매일올레시장 먹거리\n제주특별자치도 서귀포시 중앙로62번길 18\n다양한 제주 길거리 음식과 전통 간식을 맛볼 수 있습니다. 1인 평균 가격: 7,000원",
          "[30] 애월브런치카페\n제주특별자치도 제주시 애월읍 애월북서길 56\n바다 뷰와 함께 즐기는 브런치와 커피가 일품입니다. 1인 평균 가격: 18,000원"
      ));
    } else {
      // 제주가 아닌 경우
      allRestaurants.addAll(List.of(
          "[안내] 현재 더미 데이터는 제주도만 지원합니다.\n제주도 여행 계획을 요청해주세요."
      ));
    }
    
    return formatResults(query, allRestaurants);
  }

  // 숙소 검색 결과
  private String getAccommodationResults(String query) {
    String destination = extractDestination(query);
    
    // 지역별 숙소 데이터
    List<String> allAccommodations = new ArrayList<>();
    
    if (destination.contains("제주")) {
      allAccommodations.addAll(List.of(
          "[1] 제주신라호텔\n제주특별자치도 서귀포시 중문관광로72번길 75\n중문 해변의 럭셔리 5성급 호텔입니다. 오션뷰와 다양한 부대시설이 완비되어 있습니다. 1박 요금: 350,000원",
          "[2] 롯데호텔제주\n제주특별자치도 서귀포시 중문관광로 35\n가족 단위 여행객에게 인기있는 대형 리조트입니다. 워터파크와 면세점이 함께 있습니다. 1박 요금: 280,000원",
          "[3] 메종글래드제주\n제주특별자치도 제주시 노연로 80\n제주시내 중심의 모던한 비즈니스 호텔입니다. 교통이 편리하고 시설이 깨끗합니다. 1박 요금: 120,000원",
          "[4] 해비치호텔앤드리조트제주\n제주특별자치도 서귀포시 중문관광로 222\n중문 해변을 바라보는 대형 리조트입니다. 가족 여행에 적합한 시설이 많습니다. 1박 요금: 200,000원",
          "[5] 제주오션스위츠호텔\n제주특별자치도 제주시 탑동로 78\n제주항 근처 오션뷰 호텔입니다. 객실이 넓고 조식이 훌륭합니다. 1박 요금: 150,000원",
          "[6] 성산일출봉펜션\n제주특별자치도 서귀포시 성산읍 일출로 250\n성산일출봉 근처 바다 뷰 펜션입니다. 조용하고 아늑한 분위기입니다. 1박 요금: 90,000원",
          "[7] 애월한옥스테이\n제주특별자치도 제주시 애월읍 애월해안로 548\n전통 한옥을 개조한 숙소입니다. 바다 뷰와 한옥의 멋이 조화를 이룹니다. 1박 요금: 110,000원",
          "[8] 협재비치호텔\n제주특별자치도 제주시 한림읍 한림로 329-10\n협재 해수욕장 바로 앞 호텔입니다. 바다를 보며 휴식을 즐길 수 있습니다. 1박 요금: 130,000원",
          "[9] 서귀포KAL호텔\n제주특별자치도 서귀포시 중문관광로 242\n중문 단지의 전통있는 특급 호텔입니다. 한라산과 바다가 보이는 전망이 좋습니다. 1박 요금: 180,000원",
          "[10] 제주게스트하우스\n제주특별자치도 제주시 신대로 82\n가성비 좋은 도심 게스트하우스입니다. 배낭여행객들에게 인기가 많습니다. 1박 요금: 35,000원",
          "[11] 우도펜션\n제주특별자치도 제주시 우도면 연평리\n우도의 에메랄드빛 바다를 볼 수 있는 펜션입니다. 조용하고 한적한 섬 여행에 적합합니다. 1박 요금: 80,000원",
          "[12] 월정리비치호텔\n제주특별자치도 제주시 구좌읍 월정4길 46\n월정리 해변 앞 부티크 호텔입니다. SNS 감성 숙소로 인기입니다. 1박 요금: 160,000원",
          "[13] 제주파크로얄호텔\n제주특별자치도 서귀포시 중문관광로 122\n중문 단지의 합리적인 가격의 특급 호텔입니다. 기본 시설이 잘 갖춰져 있습니다. 1박 요금: 140,000원",
          "[14] 한림비치펜션\n제주특별자치도 제주시 한림읍 협재리\n협재 해변 근처 아늑한 펜션입니다. 주방과 바베큐 시설이 있습니다. 1박 요금: 85,000원",
          "[15] 제주오리엔탈호텔\n제주특별자치도 제주시 탑동로 47\n제주시내 중심가의 비즈니스 호텔입니다. 공항과 가까워 편리합니다. 1박 요금: 100,000원",
          "[16] 서귀포게스트하우스\n제주특별자치도 서귀포시 중앙로 95\n서귀포 시내 중심의 깨끗한 게스트하우스입니다. 배낭여행자에게 적합합니다. 1박 요금: 40,000원",
          "[17] 애월풀빌라\n제주특별자치도 제주시 애월읍 애월북서길 89\n프라이빗 수영장이 있는 고급 풀빌라입니다. 특별한 여행에 추천합니다. 1박 요금: 400,000원",
          "[18] 섭지코지리조트\n제주특별자치도 서귀포시 성산읍 섭지코지로 107\n섭지코지 절경을 감상할 수 있는 리조트입니다. 골프장도 함께 있습니다. 1박 요금: 220,000원",
          "[19] 제주호텔더그랑블루\n제주특별자치도 제주시 노형로 544\n제주시내의 합리적인 가격의 호텔입니다. 가족 단위 여행객에게 인기입니다. 1박 요금: 95,000원",
          "[20] 한림한옥펜션\n제주특별자치도 제주시 한림읍 한림해안로 501\n전통 한옥 스타일의 펜션입니다. 조용한 분위기에서 휴식할 수 있습니다. 1박 요금: 100,000원",
          "[21] 성산섬프리호텔\n제주특별자치도 서귀포시 성산읍 일출로 286\n성산일출봉 근처 가성비 좋은 호텔입니다. 깨끗하고 교통이 편리합니다. 1박 요금: 70,000원",
          "[22] 중문비치리조트\n제주특별자치도 서귀포시 중문관광로 154번길 29\n중문 해변의 아늑한 소규모 리조트입니다. 가족 여행에 적합합니다. 1박 요금: 170,000원",
          "[23] 제주캠핑장\n제주특별자치도 제주시 구좌읍 평대리\n제주 자연을 만끽할 수 있는 캠핑장입니다. 카라반과 텐트 모두 가능합니다. 1박 요금: 60,000원",
          "[24] 함덕비치호텔\n제주특별자치도 제주시 조천읍 조함해안로 519\n함덕 해수욕장 앞 오션뷰 호텔입니다. 가족 여행객에게 인기입니다. 1박 요금: 135,000원",
          "[25] 제주시티호텔\n제주특별자치도 제주시 서광로 144\n제주시내 중심의 편리한 위치입니다. 비즈니스와 관광 모두 좋습니다. 1박 요금: 85,000원",
          "[26] 표선민박\n제주특별자치도 서귀포시 표선면 표선리\n현지 주민이 운영하는 아늑한 민박입니다. 저렴하고 인심 좋은 숙소입니다. 1박 요금: 50,000원",
          "[27] 신화리조트\n제주특별자치도 서귀포시 안덕면 신화역사로 304번길 38\n신화월드 내 대형 리조트입니다. 테마파크와 함께 즐길 수 있습니다. 1박 요금: 250,000원",
          "[28] 제주드림타워\n제주특별자치도 서귀포시 중문관광로 2\n38층 랜드마크 호텔입니다. 카지노와 면세점이 함께 있습니다. 1박 요금: 300,000원",
          "[29] 오설록게스트하우스\n제주특별자치도 서귀포시 안덕면 신화역사로 23\n오설록 근처의 깨끗한 게스트하우스입니다. 녹차밭 뷰가 아름답습니다. 1박 요금: 45,000원",
          "[30] 제주모텔\n제주특별자치도 제주시 연북로 123\n단기 여행객을 위한 깨끗한 모텔입니다. 무료 주차가 가능합니다. 1박 요금: 55,000원"
      ));
    } else {
      allAccommodations.addAll(List.of(
          "[안내] 현재 더미 데이터는 제주도만 지원합니다.\n제주도 여행 계획을 요청해주세요."
      ));
    }

    return formatResults(query, allAccommodations);
  }
  
  // 검색 결과 포맷팅 (랜덤 10개 반환, 단 "가성비 저렴한" 키워드가 있으면 가격순 정렬)
  private String formatResults(String query, List<String> allItems) {
    List<String> selected;
    
    // "가성비 저렴한" 키워드 확인
    if (query.contains("가성비") || query.contains("저렴한")) {
      // 가격 순으로 정렬
      List<String> sorted = new ArrayList<>(allItems);
      sorted.sort((a, b) -> {
        int priceA = extractPrice(a);
        int priceB = extractPrice(b);
        return Integer.compare(priceA, priceB);  // 오름차순 (저렴한 순)
      });
      // 가장 저렴한 10개 선택
      selected = sorted.subList(0, Math.min(10, sorted.size()));
    } else {
      // 기존 로직: 랜덤 10개
      List<String> shuffled = new ArrayList<>(allItems);
      Collections.shuffle(shuffled, random);
      selected = shuffled.subList(0, Math.min(10, shuffled.size()));
    }
    
    // 결과 포맷팅
    StringBuilder result = new StringBuilder();
    result.append(String.format("[검색어: %s]\n\n", query));
    
    for (int i = 0; i < selected.size(); i++) {
      // 번호를 다시 매김 [1], [2], [3]...
      String item = selected.get(i).replaceFirst("\\[\\d+\\]", "[" + (i + 1) + "]");
      result.append(item);
      if (i < selected.size() - 1) {
        result.append("\n\n");
      }
    }
    
    return result.toString();
  }

  // 항목에서 가격 추출 (관광지 입장료, 맛집 평균가격, 숙소 1박요금)
  private int extractPrice(String item) {
    try {
      // "입장료: 무료" 또는 "입장료: 0원" 처리
      if (item.contains("무료")) {
        return 0;
      }
      
      // 정규식으로 숫자 추출: "X,XXX원" 또는 "XXXXX원"
      String pricePattern = "(입장료|1인 평균 가격|1박 요금):\\s*([0-9,]+)원";
      java.util.regex.Pattern pattern = java.util.regex.Pattern.compile(pricePattern);
      java.util.regex.Matcher matcher = pattern.matcher(item);
      
      if (matcher.find()) {
        String priceStr = matcher.group(2).replace(",", "");
        return Integer.parseInt(priceStr);
      }
    } catch (Exception e) {
      // 파싱 실패 시 높은 값 반환 (뒤로 밀림)
    }
    return Integer.MAX_VALUE;
  }



  // 쿼리에서 지역명 추출 (제주도만 지원)
  private String extractDestination(String query) {
    if (query.contains("제주")) {
      return "제주";
    }
    return "";  // null 대신 빈 문자열 반환
  }

  @Override
  public String fetchWebPageContent(String url) {
	// TODO Auto-generated method stub
	return null;
  }
}
